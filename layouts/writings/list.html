{{ define "main" }}

<section class="py-16 md:py-24">
  <div class="container mx-auto px-4 md:px-8 lg:px-16">
    <h1 class="text-4xl md:text-5xl font-light mb-16">{{ .Title }}</h1>
    
    <!-- Filter by Category -->
    <div class="max-w-4xl mx-auto mb-12">
      <div class="flex flex-wrap gap-4 mb-8">
        <a href="{{ "writings" | relLangURL }}" class="px-4 py-2 text-sm border hover:bg-gray-900 hover:text-white transition">All</a>
        {{ $categories := slice "Reviews" "Lyrics" "Research" "Essays" }}
        {{ range $categories }}
        <a href="{{ printf "writings/%s" (. | urlize) | relLangURL }}" class="px-4 py-2 text-sm border hover:bg-gray-900 hover:text-white transition">{{ . }}</a>
        {{ end }}
      </div>
    </div>
    
    <!-- Timeline Layout with Thumbnails -->
    <div class="max-w-4xl mx-auto">
      {{ range .Pages.GroupByDate "2006" }}
      
      <!-- Year Header -->
      <div class="mb-12">
        <h2 class="text-3xl font-light mb-8 text-gray-500">{{ .Key }}</h2>
        
        <div class="space-y-8">
          {{ range .Pages }}
          <a href="{{ .RelPermalink }}" class="group block">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 items-start">
              
              <!-- Thumbnail (optional) -->
              {{ with .Params.image }}
              <div class="md:col-span-1">
                <img src="{{ . | relURL }}" alt="{{ $.Title }}" class="w-full aspect-[4/3] object-cover">
              </div>
              <div class="md:col-span-3">
              {{ else }}
              <div class="md:col-span-4">
              {{ end }}
                <article class="bg-white p-6">
                  {{ with .Params.category }}
                  <span class="inline-block text-sm text-gray-500 mb-2">{{ . }}</span>
                  {{ end }}
                  
                  <h3 class="text-xl md:text-2xl font-medium mb-3 group-hover:text-gray-600 transition">{{ .Title }}</h3>
                  
                  {{ with .Summary }}
                  <p class="text-gray-700 mb-4">{{ . }}</p>
                  {{ end }}
                  
                  <time class="text-sm text-gray-500">{{ .Date.Format "2006.01.02" }}</time>
                </article>
              </div>
              
            </div>
          </a>
          {{ end }}
        </div>
      </div>
      
      {{ end }}
    </div>
  </div>
</section>

{{ end }}
